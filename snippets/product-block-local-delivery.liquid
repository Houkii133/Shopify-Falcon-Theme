{% comment %}
  Â© 2025 KondaSoft
  https://www.kondasoft.com
{% endcomment %}

{% liquid
  assign current_variant = product.selected_or_first_available_variant
%}

{% if current_variant.store_availabilities.size > 0 %}
  <div
    id="product-block-{{ block.id }}"
    class="product-block"
    style="
      --padding-top: {{ block.settings.padding_top | append: 'rem' }};
      --padding-bottom: {{ block.settings.padding_bottom | append: 'rem' }};
    "
    data-type="{{ block.type }}"
    {{ block.shopify_attributes }}
  >
    {% unless block.settings.heading == blank or block.settings.description == blank %}
      <header class="block-header {{ block.settings.header_alignment | prepend: 'text-' }}">
        {% unless block.settings.heading == blank %}
          <h3 class="heading {{ block.settings.heading_size }}">
            {{ block.settings.heading }}
          </h3>
        {% endunless %}
        {% unless block.settings.description == blank %}
          <div class="description rte {{ block.settings.description_font_size }}">
            {{ block.settings.description }}
          </div>
        {% endunless %}
      </header>
    {% endunless %}
    <ul class="product-local-delivery-list list-unstyled">
      {% for store_availability in current_variant.store_availabilities %}
        <li class="product-local-delivery-item">
          <div class="product-local-delivery-item-left">
            <div class="product-local-delivery-item-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-shop" viewBox="0 0 16 16">
                <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z"/>
              </svg>
            </div>
            <div class="product-local-delivery-item-content">
              <h4
                class="heading h6"
              >
                {{ store_availability.location.name }}
              </h4>
              <address class="">
                {{ store_availability.location.address.address1 }},
                {% unless store_availability.location.address.address2 == blank %}
                  {{ store_availability.location.address.address2 }},
                {% endunless %}
                {{ store_availability.location.address.zip }}, {{ store_availability.location.address.city }},
                {{ store_availability.location.address.country }}
              </address>
              {% unless store_availability.location.address.phone == blank %}
                <p style="margin-bottom: 0;">
                  <a href="tel:{{ store_availability.location.address.phone }}" class="link">
                    {{ store_availability.location.address.phone }}
                  </a>
                </p>
              {% endunless %}
            </div>
          </div>
          <div class="product-local-delivery-item-availability">
            {% if store_availability.available %}
              <p class="product-local-delivery-item-availability-available">
                {{ store_availability.pick_up_time }}
              </p>
            {% else %}
              <p style="product-local-delivery-item-availability-sold-out">
                {{ 'product.sold_out' | t }}
              </p>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}
